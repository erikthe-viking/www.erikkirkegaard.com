I"£O<p><em>For my english readers, this post is in French. It is talking about student data from the French education system so I thought it would be better to write it in French.</em>
Je suis rÃ©cemment retournÃ© au LycÃ©e. Non pas comme Ã©lÃ¨ve mais comme professeur.
Pendant 2 mois jâ€™ai enseignÃ© les mathÃ©matiques (ou du moins jâ€™ai essayÃ©!) et en regardant les notes des diffÃ©rents contrÃ´les, je dois dire que jâ€™Ã©tais un peu perplexe. En effet, la distribution des notes autour de la moyenne est singuliÃ¨re. Elle semble avoir parfois une forme gaussienne, plus ou moins Ã©talÃ©e et dâ€™autres fois une forme plus complexe avec, semble-t-il, une sÃ©paration en 2 groupes (2 Gaussiennes). Comme jâ€™adore lâ€™analyse de donnÃ©es et que jâ€™ai tous les outils Ã  ma disposition avec Python, jâ€™ai plongÃ© dans lâ€™analyse des notes. Jâ€™ai utilisÃ© non seulement des statistiques que je leur ai enseignÃ©s (au programme du Bac), mais câ€™Ã©tait aussi lâ€™occasion dâ€™utiliser mes algorithmes favoris dâ€™apprentissage automatique et intelligence artificielle, ici le modÃ¨le de mÃ©lange gaussien. Les rÃ©sultats et lâ€™analyse en elle-mÃªme sont intÃ©ressants et câ€™est pour ca que je les partage. VoilÃ  ce que jâ€™ai dÃ©couvertâ€¦</p>

<h1 id="introduction">Introduction</h1>

<p>Comme mon entreprise a encore du mal Ã  dÃ©coller, jâ€™ai dÃ©cidÃ© de chercher des alternatives. Et rÃ©cemment je suis tombÃ© sur lâ€™annonce dâ€™un lycÃ©e qui cherchait un prof de math Ã  mi-temps pour 2 mois. Ca me semblait parfait pour me changer un peu les idÃ©es et sortir du code informatique que je voyais toute la journÃ©e.</p>

<p>Câ€™est une drÃ´le dâ€™expÃ©rience pour moi. Je dois avouer que je nâ€™Ã©tais pas prÃ©parÃ© Ã  ca. Jâ€™ai appris beaucoup de choses durant ces 2 mois au contact des Ã©lÃ¨ves. Jâ€™ai pu remarquer une premiÃ¨re chose, les Ã©lÃ¨ves nâ€™ont pas le niveau de maturitÃ© auquel je mâ€™attendais. Je les ai pris pour des adultes, je leur ai donnÃ© trop de libertÃ©, et certains en ont profitÃ©. A la fin, bien sÃ»r, cela se voit sur les notes.</p>

<p>Jâ€™ai enseignÃ© les mathÃ©matiques aux Ã©lÃ¨ves de la filiÃ¨re Bac Pro dâ€™un lycÃ©e, donc les classes de seconde, premiÃ¨re et terminale Bac Pro. Cette filiÃ¨re est particuliÃ¨re dans le sens oÃ¹ il y a une proportion plus grande dâ€™Ã©lÃ¨ves ayant des difficultÃ©s avec le systÃ¨me scolaire standard par rapport aux filiÃ¨res gÃ©nÃ©rales. Le Bac Pro est une voie plus rapide vers la fin des Ã©tudes et la vie active. Il y a aussi des Ã©lÃ¨ves qui nâ€™ont pas de difficultÃ© particuliÃ¨re et qui ont fait le choix de cette filiÃ¨re par goÃ»t.</p>

<p>Jâ€™ai trouvÃ© un niveau trÃ¨s hÃ©tÃ©rogÃ¨ne qui va des bons Ã©lÃ¨ves sÃ©rieux et motivÃ©s jusquâ€™aux Ã©lÃ¨ves en grande difficultÃ© et totalement fermÃ©s aux mathÃ©matiques. Ces derniers ont toujours Ã©tÃ© en Ã©chec en mathÃ©matiques et ont baissÃ© les bras, comme ils me lâ€™ont dit en classe. Je me suis demandÃ© comment ces personnes lÃ  Ã©volueraient Ã  lâ€™approche du Bac. Prendraient-elles conscience de lâ€™enjeu et se mettraient-elles au travail en classe de premiÃ¨re ou de terminale? jâ€™ai trouvÃ© un dÃ©but de rÃ©ponse, en Ã©tudiant la distribution des notes de chaque classe.</p>

<h1 id="avertissement">Avertissement</h1>

<p>Lâ€™analyse statistique porte sur 2 mois de cours et 3 classes de 30 Ã©lÃ¨ves chacune. Lâ€™effectif est donc assez faible. Le lecteur ne doit rien conclure hÃ¢tivement car les rÃ©sultats sur un si faible Ã©chantillon peuvent Ãªtre simplement dus Ã  des fluctuations statistiques.</p>

<h1 id="but-de-lanalyse">But de lâ€™analyse</h1>

<p>On va Ã©tudier la distribution des notes des Ã©lÃ¨ves autour de la moyenne. Ce que lâ€™on sâ€™attend Ã  trouver, câ€™est une <a href="https://fr.wikipedia.org/wiki/Fonction_gaussienne">distribution gaussienne</a>, la fameuse courbe en cloche que lâ€™on voit sur la figure ci-dessous. On lâ€™appelle encore â€œ<a href="https://fr.wikipedia.org/wiki/Loi_normale">loi normale</a>â€.</p>

<p><img src="/personal-blog/images/lycee/loinormale.svg" alt="Loi normale" title="Loi normale par Nusha sur Wikipedia slovÃ¨ne â€” TransfÃ©rÃ© de sl.wikipedia Ã  Commons., GFDL" /></p>

<p>Dans une telle configuration, beaucoup dâ€™Ã©lÃ¨ves se situent autour de la moyenne de la classe et plus les notes sont Ã©levÃ©s plus le nombre dâ€™Ã©lÃ¨ves qui ont de telles notes diminue. De la mÃªme maniÃ¨re pour les mauvaises notes. Il faut imaginer que sur la figure, le centre de la courbe (le zÃ©ro) est en fait la note moyenne. Le symbole sigma est lâ€™Ã©cart type et permet de caractÃ©riser lâ€™Ã©talement de la distribution autour de la moyenne. Si toutes les notes sont concentrÃ©es dans un petit intervalle autour de la moyenne, sigma aura une valeur faible. Pour les classes de Bac Pro, on va estimer ce sigma et vÃ©rifier aussi que lâ€™on a bien une gaussienne.</p>

<h1 id="les-donnÃ©es">Les DonnÃ©es</h1>

<p>Pour les seconde Pro (2PRO), la moyenne de chaque Ã©lÃ¨ve a Ã©tÃ© obtenue avec 2 interrogations coefficient 2 et un devoir Ã  la maison coefficient 1. Jâ€™ai Ã©tÃ© plutÃ´t indulgent sur les notes et la moyenne de la classe est Ã  11.39. Ci-dessous, on peut voir la distribution des notes autour de la moyenne. Lâ€™histogramme montre le nombre dâ€™Ã©lÃ¨ves pour chaque note de 0 Ã  20. Par exemple, 2 Ã©lÃ¨ves ont une note comprise entre 7 et 8 (les moins bonnes notes).</p>

<p><img src="/personal-blog/images/lycee/distribution2PRO.png" alt="Distribution 2PRO" title="Distribution 2PRO" /></p>

<p>La distribution nâ€™est pas une belle courbe en cloche et câ€™est normal. Quand on a peu de donnÃ©es (ici les notes de 30 Ã©lÃ¨ves sur 3 interrogations), on a de fortes fluctuations statistiques. Un peu comme quand on fait des enfants, on a une chance sur 2 dâ€™avoir une fille mais si on a 6 enfants, il est bien possible dâ€™avoir 4, 5 voire mÃªme 6 filles. On a quand mÃªme, grossiÃ¨rement, une allure de gaussienne, avec beaucoup dâ€™Ã©lÃ¨ves qui ont des notes autour de la moyenne de la classe, puis une diminution assez forte quand on sâ€™en Ã©loigne.</p>

<p>Pour les premiÃ¨res (1PRO), la moyenne a Ã©tÃ© calculÃ©e Ã  partir de 2 interrogations. La moyenne est de 7.9. Jâ€™ai Ã©tÃ© plus sÃ©vÃ¨re sur les notes mais je ne crois pas que ca ait eu un impact sur leur travail. Voici la distribution des notes.</p>

<p><img src="/personal-blog/images/lycee/distribution1PRO.png" alt="Distribution 1PRO" title="Distribution 1PRO" /></p>

<p>On remarque tout de suite que la distribution est plus Ã©talÃ©e. Si on fait lâ€™hypothÃ¨se que câ€™est une gaussienne, lâ€™Ã©cart type est ici plus grand. NÃ©anmoins, la distribution ne ressemble pas vraiment Ã  une cloche. Il y aurait plutÃ´t 2 bosses de part et dâ€™autre de la moyenne, un peu comme sâ€™il y avait 2 gaussiennes cÃ´te Ã  cÃ´te. Ce pourrait Ãªtre comme dans la figure ci-dessous (prise sur <a href="https://fr.wikipedia.org/wiki/Mod%C3%A8le_de_m%C3%A9langes_gaussiens">wikipedia</a>):</p>

<p><img src="/personal-blog/images/lycee/Double_Gauss.png" alt="Distribution double gaussienne" title="Distribution double gaussienne" /></p>

<p>La courbe bleue est la somme des fonctions gaussiennes rouge et verte. Remarquez comme lâ€™allure de cette courbe bleue ressemble Ã  la distribution des notes, avec 2 â€œbossesâ€ est un creux au milieu.</p>

<p>Voyons maintenant ce que donne la distribution pour les terminales (TPRO). On a ici seulement une interrogation.</p>

<p><img src="/personal-blog/images/lycee/distributionTPRO.png" alt="Distribution TPRO" title="Distribution TPRO" /></p>

<p>Le phÃ©nomÃ¨ne observÃ© en 1PRO est ici encore plus criant. Il semble y avoir 2 groupes dans la classe: le groupe des bons Ã©lÃ¨ves (entre 11 et 16) et le groupe des Ã©lÃ¨ves qui ont dÃ©crochÃ© (majoritairement entre 4 et 8). On peut se demander dâ€™abord si câ€™est une effet statistique et ensuite sâ€™il sâ€™agit dâ€™une Ã©volution des Ã©lÃ¨ves vers 2 groupes distincts, au fur et Ã  mesure des annÃ©es de lycÃ©e. On va maintenant essayer de confirmer ou dâ€™infirmer ce phÃ©nomÃ¨ne.</p>

<h1 id="estimation-des-distributions-Ã -laide-dapprentissage-automatique">Estimation des distributions Ã  lâ€™aide dâ€™apprentissage automatique</h1>

<p>Pour trouver la courbe gaussienne la plus proche des donnÃ©es, il suffit de calculer la moyenne et lâ€™Ã©cart-type des donnÃ©es (ces 2 fonctions sont disponible sur les calculatrices scientifiques, Excel ou bien en langage Python). On peut ainsi tracer la gaussienne paramÃ©trÃ©e par ces 2 valeurs.
Si les donnÃ©es sont issues dâ€™une somme de plusieurs distributions gaussiennes, cela se complique un petit peu. Mais il existe des algorithmes pour rÃ©soudre ce problÃ¨me, pourvu quâ€™on leur spÃ©cifie le nombre de gaussiennes Ã  trouver. Jâ€™utilise ici le <a href="https://fr.wikipedia.org/wiki/Mod%C3%A8le_de_m%C3%A9langes_gaussiens">modÃ¨le de mÃ©langes gaussiens</a>. On doit faire lâ€™hypothÃ¨se que les donnÃ©es sont issues de plusieurs groupes indÃ©pendants, suivant chacun une loi normale avec une moyenne et un Ã©cart type diffÃ©rent. Les informations Ã  donner pour construire le modÃ¨le sont les notes et le nombre de groupes (le nombre de gaussiennes) que lâ€™on suppose avoir dans la classe. Le programme va automatiquement donner les moyennes et Ã©cart types pour chaque groupe. les valeurs trouvÃ©es sont celles qui maximisent une quantitÃ© qui sâ€™appelle la <a href="https://fr.wikipedia.org/wiki/Maximum_de_vraisemblance">vraisemblance</a>. Lâ€™algorithme en lui-mÃªme est intÃ©ressant mais je ne vais pas lâ€™expliquer ici. Il mÃ©riterait un article de blog pour lui tout seulâ€¦</p>

<p>Ce modÃ¨le a bien sÃ»r des limites. Il ne trouve pas forcement le maximum global de la vraisemblance et peut converger sur un maximum local. De plus, le nombre de notes reste faible pour faire une Ã©tude statistique et cela a une influence sur les rÃ©sultats du modÃ¨le. Les algorithmes dâ€™apprentissage automatiques ne font pas des miracles et restent tributaires de la qualitÃ© et la quantitÃ© des donnÃ©es.</p>

<p>En pratique, avec Python, on peut utiliser le module <a href="http://scikit-learn.org">scikit-learn</a> qui contient un ensemble assez complet de programmes dâ€™<a href="https://fr.wikipedia.org/wiki/Apprentissage_automatique">apprentissage automatique</a> (machine learning). On y trouve une version du <a href="http://scikit-learn.org/stable/modules/generated/sklearn.mixture.GaussianMixture.html#sklearn.mixture.GaussianMixture">modÃ¨le de mÃ©langes gaussiens</a> (Gaussian Mixture Model en anglais).</p>

<h2 id="dÃ©tails-dimplÃ©mentation">DÃ©tails dâ€™implÃ©mentation</h2>

<p>Ceci est une parenthÃ¨se sur lâ€™utilisation de Python pour les calculs. Le lecteur qui nâ€™est pas intÃ©ressÃ© par le dÃ©tail des calculs peut directement passer Ã  la section â€œrÃ©sultatsâ€.</p>

<p>On importe le module <code class="language-plaintext highlighter-rouge">scikit-learn</code> et on lance la fonction comme suit:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">sklearn.mixture</span> <span class="kn">import</span> <span class="n">GaussianMixture</span>
<span class="n">n_groups</span><span class="o">=</span><span class="mi">1</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">GaussianMixture</span><span class="p">(</span><span class="n">n_groups</span><span class="p">)</span>
<span class="n">g</span><span class="p">.</span><span class="n">fit</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
</code></pre></div></div>

<p>oÃ¹ <code class="language-plaintext highlighter-rouge">n_groups</code> est le nombre de groupes que lâ€™on suppose dans la classe et <code class="language-plaintext highlighter-rouge">notes</code> est la liste des notes sur une colonne. La commande <code class="language-plaintext highlighter-rouge">g.fit</code> va lancer lâ€™algorithme et stocker les rÃ©sultats dans diffÃ©rentes variables associÃ©es Ã  <code class="language-plaintext highlighter-rouge">g</code>. Pour obtenir les rÃ©sultats de chaque groupe, on peut utiliser la routine itÃ©rative suivante:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">group_id</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_groups</span><span class="p">):</span>
    <span class="n">weight</span> <span class="o">=</span> <span class="n">g</span><span class="p">.</span><span class="n">weights_</span><span class="p">[</span><span class="n">group_id</span><span class="p">]</span>
    <span class="n">mean</span> <span class="o">=</span> <span class="n">g</span><span class="p">.</span><span class="n">means_</span><span class="p">[</span><span class="n">group_id</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">sigma</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">g</span><span class="p">.</span><span class="n">covariances_</span><span class="p">[</span><span class="n">group_id</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"GROUP"</span><span class="p">,</span><span class="n">group_id</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Weight"</span><span class="p">,</span><span class="nb">round</span><span class="p">(</span><span class="n">weight</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Mean"</span><span class="p">,</span><span class="nb">round</span><span class="p">(</span><span class="n">mean</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Sigma"</span><span class="p">,</span><span class="nb">round</span><span class="p">(</span><span class="n">sigma</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div></div>

<p>Ici, <code class="language-plaintext highlighter-rouge">weight</code> est le poids de chaque gaussienne, <code class="language-plaintext highlighter-rouge">mean</code> sa moyenne et <code class="language-plaintext highlighter-rouge">sigma</code> son Ã©cart type.</p>

<h2 id="rÃ©sultats">RÃ©sultats</h2>

<p>Voici ce que lâ€™on obtient pour les notes des 2PRO si on suppose un seul groupe:</p>

<p><img src="/personal-blog/images/lycee/distribution2PROfit.png" alt="Distribution 2PRO" title="Distribution 2PRO" /></p>

<p>La gaussienne centrÃ©e en 11.39 et dâ€™Ã©cart type 2.45 semble bien coller avec les donnÃ©es.
Passons maintenant aux 1PRO.
Supposons dâ€™abord quâ€™il y a un seul groupe dans la classe. On obtient le rÃ©sultat suivant.</p>

<p><img src="/personal-blog/images/lycee/distribution1PROfit1.png" alt="Distribution 1PRO 1 groupe" title="Distribution 1PRO 1 groupe" /></p>

<p>Si lâ€™on suppose quâ€™il existe 2 groupes.</p>

<p><img src="/personal-blog/images/lycee/distribution1PROfit2.png" alt="Distribution 1PRO 2 groupes" title="Distribution 1PRO 2 groupe" /></p>

<p>Il est difficile de dÃ©partager ces rÃ©sultats en regardant les graphiques. On va essayer de le faire plus objectivement, en utilisant le score â€œBICâ€ pour <a href="https://en.wikipedia.org/wiki/Bayesian_information_criterion">Bayesian Information Criterion</a> ou critÃ¨re dâ€™information BayÃ©sien. 
Selon ce critÃ¨re, le modÃ¨le pour lequel la valeur BIC est la plus petite est le meilleur (le plus adaptÃ© Ã  la distribution).
La fonction Python utilisÃ©e ici (GaussianMixture) calcule pour nous cette valeur. Pour lâ€™hypothÃ¨se avec 1 groupe cette valeur est 163.96 et pour 2 groupes elle est de 166.87.</p>

<p>Le modÃ¨le avec un seul groupe dâ€™Ã©lÃ¨ves dÃ©crit ici (lÃ©gÃ¨rement) mieux notre distribution de notes.
Remarquons que lâ€™Ã©cart type de la gaussienne pour les 2PRO vaut 2.45 et pour les 1PRO, 3.32. On a donc une distribution des notes bien plus Ã©talÃ©e pour les 1PRO, ce quâ€™on voit sur le graphique. Les diffÃ©rences entre bons Ã©lÃ¨ves et Ã©lÃ¨ves en difficultÃ© sont plus accentuÃ©s dans la classe de 1PRO, mÃªme si on ne peut pas parler de 2 groupes bien distincts.</p>

<p>Finissons par la classe de TPRO. Jâ€™ai Ã©cartÃ© la note zÃ©ro dâ€™une Ã©lÃ¨ve qui est sortie de lâ€™interrogation sans me rendre sa copie. Je ne pense pas que cette note soit reprÃ©sentative et elle fausse la distribution, dâ€™autant plus que les notes nâ€™ont pas Ã©tÃ© moyennÃ©es sur plusieurs interrogations. Voici ce que lâ€™on obtient avec lâ€™hypothÃ¨se dâ€™un groupe.</p>

<p><img src="/personal-blog/images/lycee/distributionTPROfit1.png" alt="Distribution TPRO 1 groupe" title="Distribution TPRO 1 groupe" /></p>

<p>Il est plus difficile de voir la correspondance entre la distribution des notes et le modÃ¨le. Si lâ€™on suppose quâ€™il existe 2 groupes:</p>

<p><img src="/personal-blog/images/lycee/distributionTPROfit2.png" alt="Distribution TPRO 2 groupes" title="Distribution TPRO 2 groupe" /></p>

<p>La reprÃ©sentation semble plus adaptÃ©e.
Si lâ€™on compare le BIC des 2 rÃ©sultats, on a 127.37 pour le modÃ¨le Ã  un groupe et 124.07 pour le modÃ¨le Ã  2 groupes. Il semble donc que le modÃ¨le Ã  2 groupes soit plus fidÃ¨le pour dÃ©crire la distribution des notes de TPRO. Cela confirme la tendance de sÃ©paration entre les Ã©lÃ¨ves de la classe avec le groupe des â€œbonsâ€ et le groupe des Ã©lÃ¨ves en difficultÃ© qui ont baissÃ© les bras.</p>

<p>Pour montrer les limites de cette Ã©tude, voici maintenant la distribution des notes pour une classe de Seconde gÃ©nÃ©rale, sur une interrogation courte de 30 minutes.</p>

<p><img src="/personal-blog/images/lycee/distribution2general.png" alt="Distribution 2 gÃ©nÃ©rale" title="Distribution 2 gÃ©nÃ©rale" /></p>

<p>On voit ici aussi une sÃ©paration en 2 groupes, comme pour les TPRO. Lâ€™Ã©volution en 2 groupes distincts en filiÃ¨re Bac Pro nâ€™est finalement peut Ãªtre pas une Ã©volution mais juste le fait que la classe, pour cette interrogation, est divisÃ©e en 2. La maniÃ¨re dont les questions sont posÃ©es dans lâ€™interrogation peut avoir eu une influence, dans le sens oÃ¹ soit on sait faire lâ€™exercice et on a tous les points, soit on a aucun point. Ceci creuse lâ€™Ã©cart entre les Ã©lÃ¨ves qui ont compris et les autres. Il faudrait confirmer sur les prochaines interrogations.</p>

<h1 id="conclusion">Conclusion</h1>

<p>Il faut rester prudent dans les conclusions avec une aussi faible quantitÃ© de donnÃ©es. Les rÃ©sultats pourraient Ãªtre dÃ» purement au hasard mais je dois noter quâ€™ils sont en accord avec lâ€™impression que jâ€™ai eu en classe. En effet, jâ€™ai trouvÃ© la classe trÃ¨s hÃ©tÃ©rogÃ¨ne avec certains Ã©lÃ¨ves attentifs et intÃ©ressÃ©s, qui posent des questions et dâ€™autres totalement dÃ©motivÃ©s. Comme je le disais au dÃ©but, certains Ã©lÃ¨ves sont convaincus quâ€™ils ne sont pas bons en mathÃ©matiques et que ca ne sert Ã  rien pour eux dâ€™essayer de travailler.</p>

<p>Au delÃ  de ces rÃ©sultats, il reste donc le problÃ¨me de gestion de la classe. Comment combiner de la meilleure maniÃ¨re ces diffÃ©rences de niveaux afin que les Ã©lÃ¨ves en difficultÃ© se motivent et suivent et que les bons Ã©lÃ¨ves ne sâ€™ennuient pas non plus (sinon, ce sont eux qui vont commencer Ã  bavarder et Ã  gÃªner le cours). Je nâ€™ai pour le moment pas de solution pour cela.</p>

<p>MÃªme sâ€™il est difficile de conclure, câ€™est tout de mÃªme un bon exercice de math et dâ€™apprentissage automatique. Un algorithme important du domaine (le modÃ¨le de mÃ©langes gaussiens) est utilisÃ© et on voit son application pratique, avec les conditions dans lesquelles on peut lâ€™utiliser, comment lâ€™appliquer et ses limites. On voit aussi un problÃ¨me central dans lâ€™analyse de donnÃ©es en statistiques et en intelligence artificielle : on a besoin dâ€™un grand, voire trÃ¨s grand, nombre de donnÃ©es pour avoir un apprentissage de qualitÃ©, et pouvoir extraire de lâ€™information pertinente de celles-ci.</p>
:ET